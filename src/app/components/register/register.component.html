
<div class="container my-5 p-5">
    <section class="bg-main-light rounded-4 shadow p-5 ">
    <h1 class="h2 text-main">{{"Register.Register Now:" |translate}} </h1>

      <form [formGroup]="registerForm" (ngSubmit)="registerTest()" >

<div class="py-2">
    <label for="name">{{"Register.name:" |translate}} </label>

    <input [ngClass]="{
        'is-valid': !registerForm.get('name')?.errors && (registerForm.get('name')?.touched || registerForm.get('name')?.dirty),
        'is-invalid': registerForm.get('name')?.errors && (registerForm.get('name')?.touched || registerForm.get('name')?.dirty),
    }"
    
    formControlName="name" type="text" class="form-control"id="name">

    @if (registerForm.get('name')?.errors && (registerForm.get('name')?.touched || registerForm.get('name')?.dirty) ) {

        <div class="alert alert-danger w-50 ">
            
               @if (registerForm.get('name')?.getError('required')) {
                    <p class="m-0">{{"Register.required" |translate}} </p >
            } 
           
                         @else if (registerForm.get('name')?.getError('minlength')) 
            {    <p class="m-0" >{{"Register.Name Should be more than or equal  3 chars" |translate}}</p >
}  
       
 
@else if (registerForm.get('name')?.getError('maxlength')) 
{<p class="m-0">{{"Register.Name Should be less than or equal  20 chars" |translate}}</p>}
    
</div>
    }



</div>




<div class="py-2">
    <label for="email">{{"Register.email:" |translate}} </label>
    <input [ngClass]="{
        'is-valid': !registerForm.get('email')?.errors && (registerForm.get('email')?.touched || registerForm.get('email')?.dirty),
        'is-invalid': registerForm.get('email')?.errors && (registerForm.get('email')?.touched || registerForm.get('email')?.dirty),
    }"
    
    formControlName="email" type="email" class="form-control"id="email">
    @if(registerForm.get('email')?.errors && (registerForm.get('email')?.touched ||registerForm.get('email')?.dirty))
    {
        <div class="alert alert-danger w-50">
            @if(registerForm.get('email')?.getError('required')){
               <p class="m-0">{{"Register.required" |translate}} </p> 
            }
            @else if (registerForm.get('email')?.getError('email')) {

                    <p class="m-0">{{"Register.Enter Valid Email" |translate}} </p>

            }
    
   </div> 
    }

  

</div>



<div class="py-2">
    <label for="password">{{"Register.password:" |translate}} </label>
    <input  [ngClass]="{
        'is-valid': !registerForm.get('password')?.errors && (registerForm.get('password')?.touched || registerForm.get('password')?.dirty),
        'is-invalid': registerForm.get('password')?.errors && (registerForm.get('password')?.touched || registerForm.get('password')?.dirty),
    }"
    
    formControlName="password" type="password" class="form-control"id="password">

    @if(registerForm.get('password')?.errors && (registerForm.get('password')?.touched || registerForm.get('password')?.dirty))
    {
        <div class="alert alert-danger w-50">
            @if(registerForm.get('password')?.getError('required')){
               <p class="m-0">required</p> 
            }
            @else if (registerForm.get('password')?.getError('pattern')) {

                    <p class="m-0">{{"Register.Enter Valid password" |translate}} </p>

            }
    
   </div> 
    }



</div>




<div class="py-2">
    <label for="rePassword">{{"Register.rePassword:" |translate}} </label>
    <input  formControlName="rePassword" type="password" class="form-control"id="rePassword">

  @if (registerForm.getError('mismatch') && (registerForm.get('rePassword')?.touched || registerForm.get('rePassword')?.dirty)) {
    <div class="alert alert-danger w-50 ">
            <p class="m-0">{{"Register.Password confirmation is incorrect" |translate}} </p>

    </div>
  }


</div>


<div class="py-2">
    <label for="phone">{{"Register.phone:" |translate}} </label>
    <input  [ngClass]="{
        'is-valid': !registerForm.get('phone')?.errors && (registerForm.get('phone')?.touched || registerForm.get('phone')?.dirty),
        'is-invalid': registerForm.get('phone')?.errors && (registerForm.get('phone')?.touched || registerForm.get('phone')?.dirty),
    }"
    
    formControlName="phone" type="tel" class="form-control"id="phone">

    @if(registerForm.get('phone')?.errors && (registerForm.get('phone')?.touched || registerForm.get('phone')?.dirty))
    {
        <div class="alert alert-danger w-50">
            @if(registerForm.get('phone')?.getError('required')){
               <p class="m-0">{{"Register.required" |translate}} </p> 
            }
            @else if (registerForm.get('phone')?.getError('pattern')) {

                    <p class="m-0">{{"Register.accept only egypt phone numbers" |translate}} </p>

            }
    
   </div> 
    }



</div>

<button  class="btn-main ms-auto">{{"Register.Register" |translate}}
    @if (isLoading) { <span><i class="fas fa-spin fa-spinner"></i></span>}
   
</button>

@if (msgError) {

    <p class="alert alert-danger w-50 m-0">{{msgError}}</p>

}

@if (msgSuccess) {
    <p class="text-center h2 text-main lead fw-bolder">{{"Register.success" |translate}}</p>

}


    </form>

  



</section>
</div>

